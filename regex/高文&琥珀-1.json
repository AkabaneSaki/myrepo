{
    "id": "e55a5905-3d5b-4acf-b202-58cfb2aaf856",
    "scriptName": "å¡è¥¿å°”ç‰©èµ„ä¼ é€ç¾åŒ–",
    "findRegex": "<Cecil_Terminal>[\\s\\S]*?<\\/Cecil_Terminal>",
    "replaceString": "```html\n<!DOCTYPE html><html lang=\"zh-CN\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Cecil Terminal v5.3</title><style>:root{--primary:#007bff;--success:#28a745;--warning:#ffc107;--danger:#dc3545;--purple:#6f42c1;--info:#17a2b8;--secondary:#6c757d;--bg:#f4f6f9;--card-bg:#fff}body{font-family:\"Segoe UI\",\"Microsoft YaHei\",sans-serif;padding:20px;background:var(--bg);color:#333;max-width:900px;margin:0 auto;user-select:none}.card{background:var(--card-bg);padding:20px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.05);margin-bottom:20px;position:relative;transition:all 0.3s ease}.card-header{display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid #eee;padding-bottom:10px;margin-bottom:15px;cursor:pointer;user-select:none}.card-header h2{margin:0;font-size:1.2rem;color:#2c3e50;display:flex;align-items:center;gap:8px}.card-header:hover h2{color:var(--primary)}.toggle-icon{transition:transform 0.3s;font-size:0.8em;color:#999}.card.collapsed .toggle-icon{transform:rotate(-90deg)}.card.collapsed .card-body{display:none}.status-bar{display:flex;justify-content:space-between;align-items:center;background:#e9ecef;padding:8px 12px;border-radius:8px;margin-bottom:15px;font-size:0.85rem}.status-bar.connected{background:#d1e7dd;color:#0f5132}.status-bar.error{background:#f8d7da;color:#842029}.fp-card{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:20px;border-radius:12px;display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;box-shadow:0 8px 20px rgba(118,75,162,0.3)}.fp-value{font-size:2.2rem;font-weight:bold;line-height:1;text-shadow:0 2px 4px rgba(0,0,0,0.2)}.btn-group-label{font-weight:bold;margin-bottom:10px;color:#555;display:block;font-size:0.95rem}.full-width-group{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:20px}@media(min-width:600px){.full-width-group{grid-template-columns:repeat(4,1fr)}}.btn-select{padding:10px 5px;border:1px solid #dee2e6;background:#fff;border-radius:8px;cursor:pointer;text-align:center;transition:all 0.2s;font-weight:500;font-size:0.85rem;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:50px;gap:4px}.btn-select:hover:not(:disabled){border-color:#adb5bd;background:#f8f9fa;transform:translateY(-2px);box-shadow:0 2px 5px rgba(0,0,0,0.05)}.btn-select.active{border-color:var(--primary);background:#e7f1ff;color:var(--primary);font-weight:bold;box-shadow:0 0 0 1px var(--primary)}.btn-select.active[data-type=\"æ”¯æ´ä¿¡æ ‡\"]{border-color:#dc3545;background:#fff0f0;color:#dc3545;box-shadow:0 0 0 1px #dc3545}.btn-select.active[data-type=\"é¢†åœ°å»ºè®¾\"]{border-color:#28a745;background:#f0fff4;color:#28a745;box-shadow:0 0 0 1px #28a745}.btn-select.active[data-type=\"æˆ˜äº‰å™¨æ¢°\"]{border-color:#6f42c1;background:#f3f0ff;color:#6f42c1;box-shadow:0 0 0 1px #6f42c1}.btn-select.active[data-type=\"ç¥ç€ç§è—\"]{border-color:#ffc107;background:#fff3cd;color:#856404;box-shadow:0 0 0 1px #ffc107}.btn-select:disabled{opacity:0.6;cursor:not-allowed;background:#e9ecef;color:#adb5bd;border-color:#dee2e6;box-shadow:none;transform:none}.draw-panel{background:#f8f9fa;border-radius:10px;padding:20px;text-align:center;border:1px dashed #dee2e6;display:flex;flex-direction:column;align-items:center;gap:15px;min-height:220px;justify-content:center;position:relative;overflow:hidden}.draw-info{font-size:0.9rem;color:#666;margin-bottom:5px}.pool-tags{display:flex;gap:5px;justify-content:center;flex-wrap:wrap;margin-bottom:10px;min-height:24px;max-width:100%}.pool-tag{padding:3px 10px;border-radius:4px;font-size:0.75rem;color:white;background:#999;box-shadow:0 1px 2px rgba(0,0,0,0.1)}.btn-draw-large{width:100%;max-width:300px;height:60px;border-radius:30px;border:none;font-size:1.1rem;font-weight:bold;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;transition:all 0.2s;position:relative;overflow:hidden;box-shadow:0 4px 15px rgba(0,0,0,0.1);color:white}.btn-draw-large:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,0.15)}.btn-draw-large:active{transform:translateY(1px)}.btn-draw-large:disabled{background:#ccc;cursor:not-allowed;transform:none;box-shadow:none}.btn-strategy{background:linear-gradient(135deg,#007bff 0%,#0056b3 100%)}.btn-amber-draw{background:linear-gradient(135deg,#ffc107 0%,#ffdb4d 100%);color:#333}.btn-war-draw{background:linear-gradient(135deg,#6f42c1 0%,#5a32a3 100%)}.price-badge{background:rgba(0,0,0,0.2);padding:2px 8px;border-radius:10px;font-size:0.8em}.lock-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(255,255,255,0.85);z-index:10;display:flex;flex-direction:column;align-items:center;justify-content:center;backdrop-filter:blur(2px)}.lock-icon{font-size:3rem;margin-bottom:10px;color:#6c757d}.lock-text{color:#495057;font-weight:bold}.sort-toolbar{display:flex;gap:10px;margin-bottom:10px;padding:0 5px}.sort-btn{padding:4px 12px;border:1px solid #ddd;background:#fff;border-radius:20px;font-size:0.8rem;cursor:pointer;transition:0.2s;color:#666}.sort-btn.active{background:var(--primary);color:white;border-color:var(--primary)}.item-list{border:1px solid #eee;border-radius:8px;max-height:400px;overflow-y:auto;background:#fafafa;font-size:0.85rem}.type-group{border-bottom:1px solid #eee;background:white}.type-group:last-child{border-bottom:none}.type-header{padding:8px 15px;background:#f8f9fa;font-weight:bold;color:#495057;display:flex;justify-content:space-between;align-items:center;font-size:0.85rem;border-bottom:1px solid #eee;cursor:default;user-select:none}.type-count{background:#e9ecef;color:#6c757d;padding:1px 8px;border-radius:10px;font-size:0.75rem}.type-content{display:block}.item{border-bottom:1px solid #eee;background:white;transition:all 0.2s;cursor:pointer}.item:hover{background:#fff;box-shadow:0 5px 15px rgba(0,0,0,0.1);transform:translateY(-1px);z-index:1;position:relative}.item:last-child{border-bottom:none}.item-header{padding:10px 15px;display:grid;grid-template-columns:auto 1fr auto auto;align-items:center;gap:10px}.quality-indicator{width:4px;height:16px;border-radius:2px;background:var(--c)}.item-name{font-weight:bold;color:#333;font-size:0.95rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.item-count{background:#eee;padding:1px 6px;border-radius:10px;font-size:0.75rem;color:#666;font-weight:bold}.item-meta{display:flex;align-items:center;gap:6px}.tag-pill{padding:2px 8px;border-radius:10px;font-size:0.7rem;color:white;background:#adb5bd}.item-details{max-height:0;opacity:0;overflow:hidden;transition:all 0.3s ease-out;background:#f8f9fa;border-top:1px solid transparent;padding:0 15px;cursor:default}.item.expanded .item-details{max-height:500px;opacity:1;padding:10px 15px 15px 15px;border-top-color:#eee}.detail-row{margin-bottom:8px;line-height:1.5;color:#555}.detail-label{font-weight:bold;color:#333;margin-right:5px}.btn-recycle{padding:4px 12px;font-size:0.8rem;background:#fff;border:1px solid #ddd;border-radius:4px;color:#666;cursor:pointer;transition:0.2s;display:flex;align-items:center;gap:4px;white-space:nowrap}.btn-recycle:hover{background:#fff0f0;color:#dc3545;border-color:#ffc9c9}.btn-refresh{padding:8px 24px;font-size:1rem;font-weight:bold;color:white;border:none;border-radius:25px;background:linear-gradient(135deg,#36d1dc 0%,#5b86e5 100%);box-shadow:0 4px 15px rgba(54,209,220,0.3);cursor:pointer;transition:all 0.3s cubic-bezier(0.25,0.8,0.25,1);text-transform:uppercase;letter-spacing:1px}.btn-refresh:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 6px 20px rgba(91,134,229,0.4);filter:brightness(1.1)}.btn-refresh:active{transform:translateY(1px) scale(0.98)}.q-æ™®é€š{--c:#6c757d}.q-ä¼˜è‰¯{--c:#28a745}.q-ç¨€æœ‰{--c:#007bff}.q-å²è¯—{--c:#6f42c1}.q-ä¼ è¯´{--c:#fd7e14}.q-ç¥è¯{--c:#dc3545}.q-å”¯ä¸€{--c:#212529}.bg-æ™®é€š{background:#6c757d}.bg-ä¼˜è‰¯{background:#28a745}.bg-ç¨€æœ‰{background:#007bff}.bg-å²è¯—{background:#6f42c1}.bg-ä¼ è¯´{background:#fd7e14}.bg-ç¥è¯{background:#dc3545}.bg-å”¯ä¸€{background:#212529}.loading-mask,.settings-panel,.overlay{display:none;position:fixed}.modal-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;backdrop-filter:blur(2px);z-index:2001}.result-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;backdrop-filter:blur(2px);z-index:2000}.overlay{top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:1999}.modal-box{background:white;width:90%;max-width:350px;border-radius:12px;padding:25px;box-shadow:0 10px 30px rgba(0,0,0,0.25);animation:popIn 0.2s ease-out;display:flex;flex-direction:column;max-height:80vh}@keyframes popIn{from{transform:scale(0.95);opacity:0}to{transform:scale(1);opacity:1}}.modal-title{font-weight:bold;font-size:1.1rem;margin-bottom:12px;color:#333;text-align:center}.modal-content{font-size:0.95rem;color:#555;margin-bottom:20px;line-height:1.6;overflow-y:auto;flex:1;text-align:left}.modal-actions{display:flex;gap:12px;justify-content:center;margin-top:auto}.btn-modal{flex:1;padding:10px;border-radius:6px;border:none;font-weight:600;cursor:pointer;font-size:0.95rem}.btn-cancel{background:#f1f3f5;color:#495057}.btn-confirm{background:var(--primary);color:white}.settings-panel{top:50%;left:50%;transform:translate(-50%,-50%);width:90%;max-width:450px;background:white;padding:25px;border-radius:12px;box-shadow:0 20px 50px rgba(0,0,0,0.3);z-index:2002}.form-control{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;box-sizing:border-box;margin-bottom:12px;font-family:monospace}.loading-mask{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(255,255,255,0.9);align-items:center;justify-content:center;z-index:100;border-radius:12px;font-weight:bold;color:var(--primary);flex-direction:column}.spinner{width:30px;height:30px;border:4px solid #f3f3f3;border-top:4px solid var(--primary);border-radius:50%;animation:spin 0.8s linear infinite;margin-bottom:12px}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}</style></head><body><div class=\"status-bar\" id=\"status\"><span style=\"display:flex;align-items:center;gap:6px\">ğŸ“¡ <span id=\"status-text\">è¿æ¥ä¸­...</span></span> <button class=\"btn-recycle\" onclick=\"ConfigManager.openSettings()\" style=\"background:var(--primary);color:white;border:none;padding:4px 10px\">âš™ï¸ é…ç½®</button></div><div class=\"fp-card\"><div><div class=\"fp-label\">âœ¨ å‘½è¿ç‚¹æ•° (FP)</div><div id=\"fp-display\" class=\"fp-value\">--</div><div style=\"font-size:.75rem;margin-top:8px;opacity:.85;background:rgba(0,0,0,0.1);padding:2px 8px;border-radius:10px;display:inline-block\">å½“å‰å±‚çº§: <span id=\"level-display\">æ£€æµ‹ä¸­</span></div></div><div style=\"text-align:right\"><button class=\"btn-refresh\" onclick=\"App.init()\">åˆ·æ–°</button></div></div><div class=\"card\" id=\"shop-card\"><div id=\"shop-loader\" class=\"loading-mask\"><div class=\"spinner\"></div><span>å¸å›½æˆ˜ç•¥éƒ¨æ•°æ®ä¼ è¾“ä¸­...</span></div><div class=\"card-header\" onclick=\"Ui.toggleCard('shop-card')\"><h2>ğŸ“¦ å¡è¥¿å°”æˆ˜ç•¥æ”¯æ´</h2><span class=\"toggle-icon\">â–¼</span></div><div class=\"card-body\"><span class=\"btn-group-label\">1. é€‰æ‹©æˆ˜ç•¥æ”¯æ´ç±»å‹</span><div class=\"full-width-group\" id=\"type-group\"><button class=\"btn-select active\" data-type=\"æ”¯æ´ä¿¡æ ‡\" onclick=\"Shop.selectType('æ”¯æ´ä¿¡æ ‡')\" style=\"color:#dc3545\"><span style=\"font-size:1.2em\">ğŸ’¥</span> æ”¯æ´ä¿¡æ ‡</button> <button class=\"btn-select\" data-type=\"é¢†åœ°å»ºè®¾\" onclick=\"Shop.selectType('é¢†åœ°å»ºè®¾')\" style=\"color:#28a745\"><span style=\"font-size:1.2em\">ğŸ—ï¸</span> é¢†åœ°å»ºè®¾</button> <button class=\"btn-select\" data-type=\"æˆ˜äº‰å™¨æ¢°\" onclick=\"Shop.selectType('æˆ˜äº‰å™¨æ¢°')\" style=\"color:#6f42c1\"><span style=\"font-size:1.2em\">âš”ï¸</span> æˆ˜äº‰å™¨æ¢°</button> <button class=\"btn-select\" data-type=\"ç¥ç€ç§è—\" onclick=\"Shop.selectType('ç¥ç€ç§è—')\" style=\"color:#d63384\"><span style=\"font-size:1.2em\">ğŸ¤«</span> ç¥ç€ç§è—</button></div><div id=\"draw-section\"></div></div></div><div class=\"card collapsed\" id=\"backpack-card\"><div class=\"card-header\" onclick=\"Ui.toggleCard('backpack-card')\"><h2>ğŸ’ æˆ˜ç•¥ç‰©èµ„èƒŒåŒ… <button class=\"btn-recycle\" style=\"background:var(--primary);color:white;border:none;padding:4px 10px;margin-left:10px\" onclick=\"event.stopPropagation();App.refreshUI()\">åˆ·æ–°</button></h2><span class=\"toggle-icon\">â–¼</span></div><div class=\"card-body\"><div class=\"sort-toolbar\"><button class=\"sort-btn active\" onclick=\"App.setSort('quality')\" id=\"btn-sort-quality\">âœ¨ å“è´¨æ’åº</button> <button class=\"sort-btn\" onclick=\"App.setSort('type')\" id=\"btn-sort-type\">ğŸ“‚ ç±»å‹åˆ†ç»„</button></div><div id=\"backpack-list\" class=\"item-list\"></div></div></div><div class=\"result-overlay\" id=\"result-modal\"><div class=\"modal-box\"><div class=\"modal-title\" id=\"result-title\">è°ƒæ‹¨æˆåŠŸ</div><div class=\"modal-content\" id=\"result-msg\"></div><div class=\"modal-actions\" id=\"result-actions\"><button class=\"btn-modal btn-confirm\" onclick=\"Ui.closeResultModal()\">æ”¶ä¸‹ç‰©èµ„</button></div></div></div><div class=\"modal-overlay\" id=\"custom-modal\"><div class=\"modal-box\"><div class=\"modal-title\" id=\"modal-title\">ç¡®è®¤æ“ä½œ</div><div class=\"modal-content\" id=\"modal-msg\">å†…å®¹</div><div class=\"modal-actions\" id=\"modal-actions\"></div></div></div><div class=\"overlay\" id=\"overlay\" onclick=\"ConfigManager.closeSettings()\"></div><div class=\"settings-panel\" id=\"api-settings\"><div style=\"display:flex;justify-content:space-between;align-items:center;margin-bottom:15px\"><h3 style=\"margin:0\">âš™ï¸ API é…ç½®</h3><span style=\"font-size:.8rem;color:#28a745;display:none\" id=\"save-msg\">âœ¨ é…ç½®å·²ä¿å­˜</span></div><label style=\"display:block;margin-bottom:5px;font-weight:700;font-size:.9rem\">API URL</label> <input type=\"text\" id=\"api-url\" class=\"form-control\" placeholder=\"http://127.0.0.1:5000/v1\"> <label style=\"display:block;margin-bottom:5px;font-weight:700;font-size:.9rem\">API Key</label> <input type=\"password\" id=\"api-key\" class=\"form-control\" placeholder=\"sk-...\"> <label style=\"display:block;margin-bottom:5px;font-weight:700;font-size:.9rem\">API Model</label><div style=\"display:flex;gap:8px;margin-bottom:5px\"><select id=\"api-model-select\" class=\"form-control\" onchange=\"document.getElementById('api-model-input').value=this.value\" style=\"margin-bottom:0\"><option value=\"\">-- è·å–åˆ—è¡¨ --</option></select> <button class=\"btn-recycle\" style=\"height:42px;padding:0 15px\" onclick=\"App.fetchModels()\">è·å–</button></div><input type=\"text\" id=\"api-model-input\" class=\"form-control\" placeholder=\"gpt-3.5-turbo\"><div style=\"text-align:right;margin-top:20px;display:flex;gap:10px\"><button class=\"btn-recycle\" style=\"flex:1;height:40px;justify-content:center\" onclick=\"App.testConnection()\">âš¡ æµ‹è¯•è¿æ¥</button> <button class=\"btn-recycle\" style=\"flex:1;background:var(--primary);color:white;border:none;height:40px;justify-content:center\" onclick=\"ConfigManager.saveAndClose()\">âœ… ä¿å­˜å¹¶å…³é—­</button></div></div><script>\nconst SystemRules={coreValues:`# åŸºç¡€æ•°å€¼è¡¨\n- æˆ˜æ–—å±‚çº§ç³»æ•°: ä¸€å±‚:2.0 | äºŒå±‚:2.8 | ä¸‰å±‚:4.0 | å››å±‚:8.0 | äº”å±‚:15.0 | å…­å±‚:35.0 | ä¸ƒå±‚:60.0\n- è£…å¤‡å€¼ (å•ä»¶æ”»/é˜²): æ™®é€š:5-20 | ä¼˜è‰¯:25-60 | ç¨€æœ‰:70-150 | å²è¯—:180-350 | ä¼ è¯´:400-700 | ç¥è¯:800-1200\n- æŠ€èƒ½/é“å…·å¨åŠ›: æ™®æ”»:20 | æ™®é€š:50-100 | ä¼˜è‰¯:120-200 | ç¨€æœ‰:250-600 | å²è¯—:800-1500 | ä¼ è¯´:2000-4000 | ç¥è¯:5000-8000\n- èµ„æºæ¶ˆè€— (MP/SP): æ™®é€š:10-100 | ä¼˜è‰¯:50-500 | ç¨€æœ‰:200-1000 | å²è¯—:800-4000 | ä¼ è¯´:2400-10000 | ç¥è¯:7200-25000`,itemRules:`# è£…å¤‡ç”Ÿæˆæ ¼å¼\n  è£…å¤‡åç§°\n  å“è´¨: æ™®é€š/ä¼˜è‰¯/ç¨€æœ‰/å²è¯—/ä¼ è¯´/ç¥è¯/å”¯ä¸€\n  ç±»å‹: æ­¦å™¨/é˜²å…·/é¥°å“\n  æ ‡ç­¾: [å­ç±»å‹][æ”»å‡»/é˜²å¾¡: XXX]\n  æ•ˆæœ: [éµå¾ª<å“è´¨æ•ˆæœé™å®šè§„åˆ™>ç”Ÿæˆ]\n  æè¿°: [å™äº‹æ€§æè¿°]\n\n# é“å…·ç”Ÿæˆæ ¼å¼\n  é“å…·åç§°\n  å“è´¨: æ™®é€š/ä¼˜è‰¯/ç¨€æœ‰/å²è¯—/ä¼ è¯´/ç¥è¯/å”¯ä¸€\n  ç±»å‹: [æ¶ˆè€—å“/ææ–™/å…¶å®ƒ]\n  æ•ˆæœ: [éµå¾ª<å“è´¨æ•ˆæœé™å®šè§„åˆ™>ç”Ÿæˆ]\n  æè¿°: [å™äº‹æ€§æè¿°]`,skillRules:`# æ ‡ç­¾å®šä¹‰\n  - å…³è”å±æ€§: [åŠ›é‡, æ•æ·, ä½“è´¨, æ™ºåŠ›, ç²¾ç¥]\n  - ç›®æ ‡ç±»å‹: [å•ä½“, 'èŒƒå›´:X', è‡ªèº«, ç¯å¢ƒ]\n  - æ ¸å¿ƒåŠŸèƒ½: [ä¼¤å®³, æ²»ç–—, æ§åˆ¶, å¢ç›Š, å‡ç›Š, åŠŸèƒ½]\n  - å¨åŠ›: ä¸¥æ ¼å‚ç…§<æ ¸å¿ƒæ•°å€¼æ€»è¡¨>\n  - ä¼¤å®³ç±»å‹: ç‰©ç†, èƒ½é‡, ç²¾ç¥, çœŸå®`,qualityRules:`# å“è´¨æ•ˆæœè¯¦æƒ… (ä¸¥ç¦ç²¾ç®€)\n\n## æ™®é€šå“è´¨ (ç¬¬ä¸€å±‚çº§) - æ•ˆæœä¸Šé™: 1\n- æ•°å€¼æ•ˆæœ: å›ºå®šå€¼ +[5-20]; ç™¾åˆ†æ¯” +[3-5]%\n- èµ„æºæ•ˆæœ (HP/MP/SP/é“å…·ä¼¤å®³): +[45-75]\n- ç”Ÿäº§åŠ æˆ: DCé™ä½ -1; ææ–™DCä¿®æ­£ +0\n- æƒ…å¢ƒæ•ˆæœ: æä¾›å½±å“è‡ªèº«çš„å¾®å°ä¾¿åˆ©æˆ–å™äº‹ä¼˜åŠ¿\n\n## ä¼˜è‰¯å“è´¨ (ç¬¬äºŒå±‚çº§) - æ•ˆæœä¸Šé™: 2\n- æ•°å€¼æ•ˆæœ: å›ºå®šå€¼ +[25-60]; ç™¾åˆ†æ¯” +[6-8]%\n- èµ„æºæ•ˆæœ (HP/MP/SP/é“å…·ä¼¤å®³): +[150-250]\n- é™„åŠ æ•ˆæœ: å¯é™„åŠ å¾®å¼±çš„[å‡ç›Š]/[å¢ç›Š]æ•ˆæœï¼ŒæŒç»­1å›åˆ\n- æŒç»­æ€§æ•ˆæœ: å¯é™„åŠ å¾®å¼±çš„æŒç»­æ€§ä¼¤å®³(DoT)/æ²»ç–—(HoT)æ•ˆæœï¼ŒæŒç»­1-2å›åˆ\n- ç”Ÿäº§åŠ æˆ: DCé™ä½ -[2-3]; ææ–™DCä¿®æ­£ +[1-2]\n\n## ç¨€æœ‰å“è´¨ (ç¬¬ä¸‰å±‚çº§) - æ•ˆæœä¸Šé™: 2\n- æ•°å€¼æ•ˆæœ: å›ºå®šå€¼ +[70-150]; ç™¾åˆ†æ¯” +[9-12]%\n- èµ„æºæ•ˆæœ (HP/MP/SP/é“å…·ä¼¤å®³): +[420-700]\n- é™„åŠ æ•ˆæœ: å¯é™„åŠ æ ‡å‡†çš„[å‡ç›Š]/[å¢ç›Š]æ•ˆæœï¼ŒæŒç»­1-3å›åˆ\n- è§„åˆ™ä¿®æ­£: èµ„æºæ¶ˆè€— -[5-10]%; å‘½ä¸­/é—ªé¿ä¿®æ­£ +[1-2]ï¼›æ°¸ä¹…å±æ€§:æ— \n- ç¯å¢ƒå½±å“: å¯åˆ¶é€ å°èŒƒå›´ã€çŸ­æŒç»­çš„æ¬¡è¦ç¯å¢ƒæ•ˆæœ(å¦‚æ²¹æ»‘ã€çƒŸé›¾)\n- ç”Ÿäº§åŠ æˆ: DCé™ä½ -[4-5]; äº§é‡å¢åŠ  +1 (æ‰¹é‡); æ£€å®šå€¼åŠ æˆ +[2-4]; ææ–™DCä¿®æ­£ +[3-5]\n\n## å²è¯—å“è´¨ (ç¬¬å››å±‚çº§) - æ•ˆæœä¸Šé™: 3 (å…¶ä¸€é¡»ä¸ºå²è¯—çº§å¾®å¼±è¦ç´ æ•ˆæœ)\n- æ•°å€¼æ•ˆæœ: å›ºå®šå€¼ +[180-350]; ç™¾åˆ†æ¯” +[13-16]%; ä¼¤å®³å‡å…(DR) [2-5]%\n- èµ„æºæ•ˆæœ (HP/MP/SP/é“å…·ä¼¤å®³): +[1100-1800]\n- é™„åŠ æ•ˆæœ: å¯é™„åŠ å¼ºåŠ›çš„[å‡ç›Š]/[å¢ç›Š]æ•ˆæœï¼ŒæŒç»­3-5å›åˆ\n- è§„åˆ™ä¿®æ­£: å‘½ä¸­/é—ªé¿ä¿®æ­£ +[3-5]; ç©¿é€ [5-8]%; æš´å‡»å€ç‡ +0.1\n- ä¸´æ—¶å¬å”¤: å¯å¬å”¤ä¸€ä¸ªå­˜åœ¨1-2å›åˆçš„ä½ç­‰çº§ä¸´æ—¶å•ä½\n- ç”Ÿäº§åŠ æˆ: DCé™ä½ -[6-8]; æ£€å®šå€¼åŠ æˆ +[5-7]; ææ–™DCä¿®æ­£ +[6-9]\n\n## ä¼ è¯´å“è´¨ (ç¬¬äº”å±‚çº§) - æ•ˆæœä¸Šé™: 3 (å…¶ä¸€é¡»ä¸ºä¼ è¯´çº§å¾®å¼±æƒèƒ½æ•ˆæœ)\n- æ•°å€¼æ•ˆæœ: å›ºå®šå€¼ +[400-700]; ç™¾åˆ†æ¯” +[17-24]%; ä¼¤å®³å‡å…(DR) [6-10]%\n- èµ„æºæ•ˆæœ (HP/MP/SP/é“å…·ä¼¤å®³): +[2600-4400]\n- é™„åŠ æ•ˆæœ: å¯é™„åŠ å¼ºåŠ›çš„[æ§åˆ¶]æ•ˆæœ\n- è§„åˆ™æ”¹å†™: å‘½ä¸­/é—ªé¿ä¿®æ­£ +[6-8]; ç©¿é€ [9-15]%\n- å…‰ç¯æ•ˆæœ: å¯æä¾›ä¸€ä¸ªå½±å“å°èŒƒå›´å•ä½çš„æŒç»­æ€§å…‰ç¯\n- æ­»äº¡è±å…: å¯æä¾›ä¸€æ¬¡æ€§çš„è‡´å‘½ä¼¤å®³å…ç–«æ•ˆæœ(1æ¬¡/æˆ˜æ–—)\n\n## ç¥è¯å“è´¨ (ç¬¬å…­å±‚çº§) - æ•ˆæœä¸Šé™: 3 (å…¶ä¸€é¡»ä¸ºç¥è¯çº§å¾®å¼±æ³•åˆ™æ•ˆæœ)\n- æ•°å€¼æ•ˆæœ: å›ºå®šå€¼ +[800-1200]; ç™¾åˆ†æ¯” +[25-30]%; ä¼¤å®³å‡å…(DR) [11-15]%\n- èµ„æºæ•ˆæœ (HP/MP/SP/é“å…·ä¼¤å®³): +[5700-9600]\n- é™„åŠ æ•ˆæœ: å¯é™„åŠ è¶³ä»¥[æ”¹å˜ç¯å¢ƒ]æˆ–[å‰¥å¤ºèƒ½åŠ›]çš„å¼ºå¤§æ•ˆæœ\n- è§„åˆ™é¢ è¦†: ç©¿é€ [16-20]%; ç»å¯¹å‘½ä¸­/é—ªé¿ (1æ¬¡/æˆ˜æ–—); ä¼¤å®³è½¬åŒ– (100%)\n- èµ„æºé‡ç½®: å¯ç«‹å³é‡ç½®è‡ªèº«çš„[æ”»å‡»]æˆ–[åŠ¨ä½œ]èµ„æº(1æ¬¡/æˆ˜æ–—)\n- æ¦‚å¿µå…ç–«: å¯æä¾›å¯¹æŸä¸€ç‰¹å®šè´Ÿé¢æ¦‚å¿µ(å¦‚ææƒ§ã€ä¸­æ¯’)çš„å®Œå…¨å…ç–«`,dropTables:`# éšæœºç±»å‹åˆ¤å®šè¡¨ (Type Category Tables)\n# NOTE: The results here are BROAD CATEGORIES. The generator must create a SPECIFIC item fitting the category.\n\n## A. æ”¯æ´ä¿¡æ ‡ (Support Beacon) - d20åˆ¤å®š\n1.  [ç”Ÿå­˜è¡¥ç»™ç±»] (é£Ÿç‰©/æ°´/ç»´ç”Ÿ)\n2.  [æ€¥æ•‘ä¸åŒ»ç–—è€—æ]\n3.  [æˆ˜æœ¯ç…§æ˜è®¾å¤‡]\n4.  [ç¯å¢ƒå‡€åŒ–/è¿‡æ»¤è£…ç½®]\n5.  [èƒ½é‡æ¢å¤è¯å‰‚/é’ˆå‰‚]\n6.  [ä¿¡å·ä¸é€šè®¯è€—æ]\n7.  [å•å…µå·¥ç¨‹å·¥å…·]\n8.  [é‡å¤–ç”Ÿç«/åŠ çƒ­è®¾å¤‡]\n9.  [æŠ•æ·å‹çˆ†ç‚¸ç‰©] (æ‰‹é›·/ç‚¸å¼¹)\n10. [æˆ˜æœ¯å¹²æ‰°å¼¹] (é—ªå…‰/éœ‡æ’¼/éŸ³çˆ†)\n11. [å®šå‘ç ´æ‹†è£…å¤‡]\n12. [ç‡ƒçƒ§ç±»æŠ•æ·ç‰©]\n13. [å•å…µè§‚æµ‹è£…å¤‡] (æŠ¤ç›®é•œ/æœ›è¿œé•œ)\n14. [å•å…µé˜²æŠ¤ç»„ä»¶] (æ’æ¿/æŠ¤å…·)\n15. [å…‰å­¦è¿·å½©/ä¼ªè£…è®¾å¤‡]\n16. [ä¾¦æŸ¥ä¸ç›‘è§†æ— äººè®¾å¤‡]\n17. [ä¾¿æºå¼æŠ¤ç›¾å‘ç”Ÿè£…ç½®]\n18. [å¤–éª¨éª¼è¾…åŠ©ç»„ä»¶]\n19. [é«˜ç©º/è½¨é“æ‰“å‡»å¼•å¯¼ä¿¡æ ‡]\n20. [æˆ˜ç•¥çº§] å¤©åŸºåŠ¨èƒ½æ‰“å‡»åè®®\n\n## B. ç¥ç€ç§è— (Amber's Stash) - d20åˆ¤å®š (CHAOS MODE)\n1.  [æ— æ„ä¹‰çš„æ—¥å¸¸åƒåœ¾] (æ–­ç»³/ç ´å¸ƒ)\n2.  [å˜è´¨/å‘éœ‰çš„é£Ÿç‰©]\n3.  [æ¯«æ— ç”¨é€”çš„çŸ³å¤´/åœŸå—]\n4.  [ä¼ªé€ çš„é’±å¸/è´µé‡å“]\n5.  [å…·æœ‰å‰¯ä½œç”¨çš„ç‚¼é‡‘äº§ç‰©] (å˜è‰²/å‘å…‰/å¼‚å‘³)\n6.  [æ•´è›Š/æ¶ä½œå‰§é“å…·]\n7.  [ç²˜æ€§/é˜»ç¢è¡ŒåŠ¨çš„é“å…·]\n8.  [æˆæ³•/é­”æœ¯é“å…·]\n9.  [ä»–äººçš„é—å¤±ç‰©] (è¡£ç‰©/é¥°å“/æŠ€èƒ½ä¹¦)\n10. [ç§å¯†/å…«å¦è®°å½•] (æ—¥è®°/ä¿¡ä»¶)\n11. [åŠ£è´¨/èµå“æ­¦å™¨]\n12. [çœŸæ­£çš„è´§å¸/è´µé‡‘å±]\n13. [å¤±çªƒçš„é«˜çº§é£Ÿå“/é¥®æ–™]\n14. [åŠæˆå“/æ•…éšœçš„é­”æ³•ç‰©å“]\n15. [é™·é˜±ç±»é“å…·] (è®©äººæ‘”å€’/æ»‘å€’)\n16. [æå…¶ç§äººçš„ç”Ÿæ´»ç”¨å“]\n17. [å¤–è§‚å”¬äººä½†æ— ç”¨çš„ç©å…·]\n18. [ç¨€æœ‰] å®ç”¨çš„æ½œè¡Œ/ç›—è´¼å·¥å…·\n19. [ä¼ è¯´] æå…¶å±é™©çš„é­”æ³•çˆ†ç‚¸ç‰©\n20. [å”¯ä¸€] å…·æœ‰æ”¶è—ä»·å€¼çš„çºªå¿µå“/æ‰‹åŠ (æ— æˆ˜æ–—å±æ€§)\n\n## C. é¢†åœ°å»ºè®¾ (Territory) - d20åˆ¤å®š\n1.  [æµæµªçš„æˆ˜æ–—äººå‘˜] (è€å…µ/ä½£å…µ)\n2.  [æµæµªçš„æ–‡åŒ–/è‰ºæœ¯äººå‘˜]\n3.  [ç†Ÿç»ƒçš„å»ºç­‘å·¥åŒ ]\n4.  [å†œä¸š/è‰è¯å­¦äººæ‰]\n5.  [é“åŒ /é‡‘å±åŠ å·¥äººæ‰]\n6.  [ç‚¼é‡‘/é­”æ³•å­¦å¾’]\n7.  [è¡Œæ”¿/ç®¡ç†äººæ‰]\n8.  [åŸºç¡€å†œä¸š/ç”Ÿå­˜èµ„æº] (ç§å­/è‚¥æ–™)\n9.  [åŸºç¡€å»ºç­‘å·¥å…·/è€—æ]\n10. [å¤§å®—å»ºç­‘ææ–™] (æ°´æ³¥/çŸ³ç –)\n11. [é­”å¯¼èƒ½æºææ–™] (æ™¶çŸ³/ç‡ƒæ–™)\n12. [åŸºç¡€æ°‘ç”Ÿè®¾æ–½è“å›¾] (æ°´äº•/é£è½¦)\n13. [é˜²å¾¡è®¾æ–½è“å›¾] (å“¨å¡”/å›´å¢™)\n14. [ç”Ÿäº§è®¾æ–½æ ¸å¿ƒ] (å·¥åŠ/é¢åŒ…æˆ¿)\n15. [å¸‚æ”¿è®¾æ–½å¥—ä»¶] (è·¯ç¯/ä¸‹æ°´é“)\n16. [é­”èƒ½ä¼ è¾“/æ¢çº½è®¾å¤‡]\n17. [ç²¾é”æ­¥å…µå¥‘çº¦] (å°é˜Ÿçº§)\n18. [ç‰¹æ®Šå…µç§å¥‘çº¦] (éª‘å…µ/ç©ºå†›)\n19. [æ–½æ³•è€…éƒ¨é˜Ÿå¥‘çº¦]\n20. [ç¥è¯] å¤ä»£é—è¿¹/æµ®ç©ºåŸæ ¸å¿ƒç»„ä»¶\n\n## D. æˆ˜äº‰å™¨æ¢° (War Machine) - d20åˆ¤å®š\n1.  [è½»å‹ä¾¦æŸ¥è½½å…·] (ä¸¤è½®/æ‚¬æµ®)\n2.  [è½»å‹çªå‡»è½½å…·] (å››è½®/è¶Šé‡)\n3.  [æ­¥å…µè¾“é€/æˆ˜è½¦]\n4.  [æ›²å°„ç«åŠ›æ”¯æ´è½¦] (è¿«å‡»ç‚®/æ¦´å¼¹)\n5.  [é‡å‹è£…ç”²æˆ˜æ–—è½¦è¾†] (å¦å…‹)\n6.  [æ”»åŸ/ç ´æ‹†ä¸“ç”¨å·¥ç¨‹è½¦]\n7.  [é˜²ç©º/ååˆ¶ç³»ç»Ÿ]\n8.  [å¤šç®¡ç«ç®­/é¥±å’Œæ‰“å‡»ç³»ç»Ÿ]\n9.  [è½»å‹æ—‹ç¿¼/å‚ç›´èµ·é™é£è¡Œå™¨]\n10. [æˆ˜æœ¯è¿è¾“é£è¡Œå™¨]\n11. [é‡å‹è½°ç‚¸é£è¡Œå™¨]\n12. [ç©ºä¸­ç‚®è‰‡/ç«åŠ›æ”¯æ´æœº]\n13. [é™†è¡Œæ¯èˆ°/ç§»åŠ¨åŸºåœ°]\n14. [åé‡åŠ›/æµ®ç©ºå ¡å’]\n15. [è¶…è§†è·é­”å¯¼é‡ç‚®]\n16. [è½¨é“/ç©ºæŠ•æŠ•æ”¾ç³»ç»Ÿ]\n17. [å·¨å‹è‡ªå¾‹æˆ˜æ–—æ„è£…ä½“]\n18. [çº³ç±³/å¾®å‹æœºæ¢°è™«ç¾¤]\n19. [æˆ˜æœ¯æ ¸å­/æˆ˜ç•¥æ‰“å‡»å‘å°„äº•]\n20. [æœ«æ—¥çº§] è½¨é“/æ­¼æ˜Ÿçº§å†³æˆ˜å…µå™¨`};const ConfigManager={STORAGE_KEY:\"cecil_terminal_config_v1\",defaults:{url:\"http://127.0.0.1:5000/v1\",key:\"\",model:\"gpt-3.5-turbo\"},load:function(){try{const raw=localStorage.getItem(this.STORAGE_KEY);if(raw)return{...this.defaults,...JSON.parse(raw)}}catch(e){}return this.defaults},save:function(config){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(config))}catch(e){}},applyToUI:function(){const config=this.load();document.getElementById(\"api-url\").value=config.url;document.getElementById(\"api-key\").value=config.key;document.getElementById(\"api-model-input\").value=config.model},saveFromUI:function(){const config={url:document.getElementById(\"api-url\").value.trim(),key:document.getElementById(\"api-key\").value.trim(),model:document.getElementById(\"api-model-input\").value.trim()};this.save(config);const msg=document.getElementById(\"save-msg\");msg.style.display=\"inline\";setTimeout((()=>msg.style.display=\"none\"),2e3);return config},openSettings:function(){this.applyToUI();document.getElementById(\"api-settings\").style.display=\"block\";document.getElementById(\"overlay\").style.display=\"block\"},closeSettings:function(){document.getElementById(\"api-settings\").style.display=\"none\";document.getElementById(\"overlay\").style.display=\"none\"},saveAndClose:function(){this.saveFromUI();setTimeout((()=>this.closeSettings()),500)}};const Config={qualityWeights:{å”¯ä¸€:7,ç¥è¯:6,ä¼ è¯´:5,å²è¯—:4,ç¨€æœ‰:3,ä¼˜è‰¯:2,æ™®é€š:1},typeSettings:{\"æ”¯æ´ä¿¡æ ‡\":{cost:100,count:1,minLevel:1},\"é¢†åœ°å»ºè®¾\":{cost:500,count:1,minLevel:1},\"æˆ˜äº‰å™¨æ¢°\":{cost:1e4,count:1,minLevel:4},\"ç¥ç€ç§è—\":{cost:100,count:1,minLevel:1}},getPool:function(type,level){if(\"ç¥ç€ç§è—\"===type)return[\"æ™®é€š\",\"ä¼˜è‰¯\",\"ç¨€æœ‰\",\"å²è¯—\",\"ä¼ è¯´\",\"ç¥è¯\",\"å”¯ä¸€\"];if(\"æˆ˜äº‰å™¨æ¢°\"===type){if(level<4)return[];if(4===level)return[\"å²è¯—\"];if(5===level)return[\"å²è¯—\",\"ä¼ è¯´\"];if(6===level)return[\"å²è¯—\",\"ä¼ è¯´\",\"ç¥è¯\"];if(level>=7)return[\"ä¼ è¯´\",\"ç¥è¯\"]}else{if(level<=3)return[\"æ™®é€š\",\"ä¼˜è‰¯\",\"ç¨€æœ‰\"];if(4===level)return[\"ä¼˜è‰¯\",\"ç¨€æœ‰\",\"å²è¯—\"];if(5===level)return[\"ç¨€æœ‰\",\"å²è¯—\",\"ä¼ è¯´\"];if(6===level)return[\"å²è¯—\",\"ä¼ è¯´\",\"ç¥è¯\"];if(level>=7)return[\"ä¼ è¯´\",\"ç¥è¯\"]}return[\"æ™®é€š\"]},determineQuality:function(d20,pool){const max=pool.length-1;if(20===d20)return pool[max];if(1===d20)return pool[0];const index=Math.floor((d20-1)/20*pool.length);return pool[index]},determineType:function(d20,type){const r20=Math.max(1,Math.min(20,d20));const mappings={\"æ”¯æ´ä¿¡æ ‡\":[\"[ç”Ÿå­˜è¡¥ç»™ç±»] (é£Ÿç‰©/æ°´/ç»´ç”Ÿ)\",\"[æ€¥æ•‘ä¸åŒ»ç–—è€—æ]\",\"[æˆ˜æœ¯ç…§æ˜è®¾å¤‡]\",\"[ç¯å¢ƒå‡€åŒ–/è¿‡æ»¤è£…ç½®]\",\"[èƒ½é‡æ¢å¤è¯å‰‚/é’ˆå‰‚]\",\"[ä¿¡å·ä¸é€šè®¯è€—æ]\",\"[å•å…µå·¥ç¨‹å·¥å…·]\",\"[é‡å¤–ç”Ÿç«/åŠ çƒ­è®¾å¤‡]\",\"[æŠ•æ·å‹çˆ†ç‚¸ç‰©] (æ‰‹é›·/ç‚¸å¼¹)\",\"[æˆ˜æœ¯å¹²æ‰°å¼¹] (é—ªå…‰/éœ‡æ’¼/éŸ³çˆ†)\",\"[å®šå‘ç ´æ‹†è£…å¤‡]\",\"[ç‡ƒçƒ§ç±»æŠ•æ·ç‰©]\",\"[å•å…µè§‚æµ‹è£…å¤‡] (æŠ¤ç›®é•œ/æœ›è¿œé•œ)\",\"[å•å…µé˜²æŠ¤ç»„ä»¶] (æ’æ¿/æŠ¤å…·)\",\"[å…‰å­¦è¿·å½©/ä¼ªè£…è®¾å¤‡]\",\"[ä¾¦æŸ¥ä¸ç›‘è§†æ— äººè®¾å¤‡]\",\"[ä¾¿æºå¼æŠ¤ç›¾å‘ç”Ÿè£…ç½®]\",\"[å¤–éª¨éª¼è¾…åŠ©ç»„ä»¶]\",\"[é«˜ç©º/è½¨é“æ‰“å‡»å¼•å¯¼ä¿¡æ ‡]\",\"[æˆ˜ç•¥çº§] å¤©åŸºåŠ¨èƒ½æ‰“å‡»åè®®\"],\"ç¥ç€ç§è—\":[\"[æ— æ„ä¹‰çš„æ—¥å¸¸åƒåœ¾] (æ–­ç»³/ç ´å¸ƒ)\",\"[å˜è´¨/å‘éœ‰çš„é£Ÿç‰©]\",\"[æ¯«æ— ç”¨é€”çš„çŸ³å¤´/åœŸå—]\",\"[ä¼ªé€ çš„é’±å¸/è´µé‡å“]\",\"[å…·æœ‰å‰¯ä½œç”¨çš„ç‚¼é‡‘äº§ç‰©] (å˜è‰²/å‘å…‰/å¼‚å‘³)\",\"[æ•´è›Š/æ¶ä½œå‰§é“å…·]\",\"[ç²˜æ€§/é˜»ç¢è¡ŒåŠ¨çš„é“å…·]\",\"[æˆæ³•/é­”æœ¯é“å…·]\",\"[ä»–äººçš„é—å¤±ç‰©] (è¡£ç‰©/é¥°å“/æŠ€èƒ½ä¹¦)\",\"[ç§å¯†/å…«å¦è®°å½•] (æ—¥è®°/ä¿¡ä»¶)\",\"[åŠ£è´¨/èµå“æ­¦å™¨]\",\"[çœŸæ­£çš„è´§å¸/è´µé‡‘å±]\",\"[å¤±çªƒçš„é«˜çº§é£Ÿå“/é¥®æ–™]\",\"[åŠæˆå“/æ•…éšœçš„é­”æ³•ç‰©å“]\",\"[é™·é˜±ç±»é“å…·] (è®©äººæ‘”å€’/æ»‘å€’)\",\"[æå…¶ç§äººçš„ç”Ÿæ´»ç”¨å“]\",\"[å¤–è§‚å”¬äººä½†æ— ç”¨çš„ç©å…·]\",\"[ç¨€æœ‰] å®ç”¨çš„æ½œè¡Œ/ç›—è´¼å·¥å…·\",\"[ä¼ è¯´] æå…¶å±é™©çš„é­”æ³•çˆ†ç‚¸ç‰©\",\"[å”¯ä¸€] å…·æœ‰æ”¶è—ä»·å€¼çš„çºªå¿µå“/æ‰‹åŠ (æ— æˆ˜æ–—å±æ€§)\"],\"é¢†åœ°å»ºè®¾\":[\"[æµæµªçš„æˆ˜æ–—äººå‘˜] (è€å…µ/ä½£å…µ)\",\"[æµæµªçš„æ–‡åŒ–/è‰ºæœ¯äººå‘˜]\",\"[ç†Ÿç»ƒçš„å»ºç­‘å·¥åŒ ]\",\"[å†œä¸š/è‰è¯å­¦äººæ‰]\",\"[é“åŒ /é‡‘å±åŠ å·¥äººæ‰]\",\"[ç‚¼é‡‘/é­”æ³•å­¦å¾’]\",\"[è¡Œæ”¿/ç®¡ç†äººæ‰]\",\"[åŸºç¡€å†œä¸š/ç”Ÿå­˜èµ„æº] (ç§å­/è‚¥æ–™)\",\"[åŸºç¡€å»ºç­‘å·¥å…·/è€—æ]\",\"[å¤§å®—å»ºç­‘ææ–™] (æ°´æ³¥/çŸ³ç –)\",\"[é­”å¯¼èƒ½æºææ–™] (æ™¶çŸ³/ç‡ƒæ–™)\",\"[åŸºç¡€æ°‘ç”Ÿè®¾æ–½è“å›¾] (æ°´äº•/é£è½¦)\",\"[é˜²å¾¡è®¾æ–½è“å›¾] (å“¨å¡”/å›´å¢™)\",\"[ç”Ÿäº§è®¾æ–½æ ¸å¿ƒ] (å·¥åŠ/é¢åŒ…æˆ¿)\",\"[å¸‚æ”¿è®¾æ–½å¥—ä»¶] (è·¯ç¯/ä¸‹æ°´é“)\",\"[é­”èƒ½ä¼ è¾“/æ¢çº½è®¾å¤‡]\",\"[ç²¾é”æ­¥å…µå¥‘çº¦] (å°é˜Ÿçº§)\",\"[ç‰¹æ®Šå…µç§å¥‘çº¦] (éª‘å…µ/ç©ºå†›)\",\"[æ–½æ³•è€…éƒ¨é˜Ÿå¥‘çº¦]\",\"[ç¥è¯] å¤ä»£é—è¿¹/æµ®ç©ºåŸæ ¸å¿ƒç»„ä»¶\"],\"æˆ˜äº‰å™¨æ¢°\":[\"[è½»å‹ä¾¦æŸ¥è½½å…·] (ä¸¤è½®/æ‚¬æµ®)\",\"[è½»å‹çªå‡»è½½å…·] (å››è½®/è¶Šé‡)\",\"[æ­¥å…µè¾“é€/æˆ˜è½¦]\",\"[æ›²å°„ç«åŠ›æ”¯æ´è½¦] (è¿«å‡»ç‚®/æ¦´å¼¹)\",\"[é‡å‹è£…ç”²æˆ˜æ–—è½¦è¾†] (å¦å…‹)\",\"[æ”»åŸ/ç ´æ‹†ä¸“ç”¨å·¥ç¨‹è½¦]\",\"[é˜²ç©º/ååˆ¶ç³»ç»Ÿ]\",\"[å¤šç®¡ç«ç®­/é¥±å’Œæ‰“å‡»ç³»ç»Ÿ]\",\"[è½»å‹æ—‹ç¿¼/å‚ç›´èµ·é™é£è¡Œå™¨]\",\"[æˆ˜æœ¯è¿è¾“é£è¡Œå™¨]\",\"[é‡å‹è½°ç‚¸é£è¡Œå™¨]\",\"[ç©ºä¸­ç‚®è‰‡/ç«åŠ›æ”¯æ´æœº]\",\"[é™†è¡Œæ¯èˆ°/ç§»åŠ¨åŸºåœ°]\",\"[åé‡åŠ›/æµ®ç©ºå ¡å’]\",\"[è¶…è§†è·é­”å¯¼é‡ç‚®]\",\"[è½¨é“/ç©ºæŠ•æŠ•æ”¾ç³»ç»Ÿ]\",\"[å·¨å‹è‡ªå¾‹æˆ˜æ–—æ„è£…ä½“]\",\"[çº³ç±³/å¾®å‹æœºæ¢°è™«ç¾¤]\",\"[æˆ˜æœ¯æ ¸å­/æˆ˜ç•¥æ‰“å‡»å‘å°„äº•]\",\"[æœ«æ—¥çº§] è½¨é“/æ­¼æ˜Ÿçº§å†³æˆ˜å…µå™¨\"]};if(mappings[type])return mappings[type][r20-1]||\"æœªçŸ¥ç±»å‹\";return\"æœªçŸ¥ç±»å‹\"}};const Ui={resolveConfirm:null,showConfirm:function(title,msg){return new Promise((resolve=>{this.resolveConfirm=resolve;document.getElementById(\"modal-title\").innerText=title;document.getElementById(\"modal-msg\").innerHTML=msg.replace(/\\n/g,\"<br>\");const acts=document.getElementById(\"modal-actions\");acts.innerHTML=`\\n                <button class=\"btn-modal btn-cancel\" onclick=\"Ui.closeModal(false)\">å–æ¶ˆ</button>\\n                <button class=\"btn-modal btn-confirm\" onclick=\"Ui.closeModal(true)\">ç¡®å®š</button>\\n            `;document.getElementById(\"custom-modal\").style.display=\"flex\"}))},showInput:function(title,msg,maxVal){return new Promise((resolve=>{this.resolveConfirm=resolve;document.getElementById(\"modal-title\").innerText=title;const content=document.getElementById(\"modal-msg\");content.innerHTML=`\\n                <div style=\"margin-bottom:15px\">${msg}</div>\\n                <div style=\"display:flex;align-items:center;gap:10px;justify-content:center;\">\\n                    <span style=\"font-weight:bold;color:#666\">æ•°é‡:</span>\\n                    <input type=\"number\" id=\"modal-input-val\" class=\"form-control\" style=\"width:80px;text-align:center;font-size:1.1rem;margin-bottom:0\" value=\"1\" min=\"1\" max=\"${maxVal}\">\\n                    <span style=\"font-size:0.85em;color:#999\">/ ${maxVal}</span>\\n                </div>\\n            `;const acts=document.getElementById(\"modal-actions\");acts.innerHTML=`\\n                <button class=\"btn-modal btn-cancel\" onclick=\"Ui.closeModal(null)\">å–æ¶ˆ</button>\\n                <button class=\"btn-modal btn-confirm\" onclick=\"Ui.closeModal(document.getElementById('modal-input-val').value)\">ç¡®è®¤</button>\\n            `;document.getElementById(\"custom-modal\").style.display=\"flex\"}))},closeModal:function(result){document.getElementById(\"custom-modal\").style.display=\"none\";if(this.resolveConfirm)this.resolveConfirm(result)},showResultsModal:function(title,itemsData){document.getElementById(\"result-title\").innerText=title;const content=document.getElementById(\"result-msg\");content.innerHTML=\"\";const list=document.createElement(\"div\");list.className=\"item-list\";list.id=\"result-item-list\";list.style.maxHeight=\"none\";list.style.border=\"none\";itemsData.forEach((item=>{const el=App.createItemElement({key:item.åç§°,...item});el.dataset.key=item.åç§°;list.appendChild(el)}));content.appendChild(list);document.getElementById(\"result-modal\").style.display=\"flex\"},closeResultModal:function(){document.getElementById(\"result-modal\").style.display=\"none\"},toggleCard:function(id){document.getElementById(id).classList.toggle(\"collapsed\")},toggleItem:function(el){el.parentElement.classList.toggle(\"expanded\")}};const App={mvuData:null,currentLevel:1,sortType:\"quality\",init:async function(){ConfigManager.applyToUI();const findMvu=()=>\"undefined\"!=typeof window.Mvu?window.Mvu:window.parent.Mvu||null;let mvuApi=findMvu();let retries=0;while(!mvuApi&&retries<10){await new Promise((r=>setTimeout(r,500)));retries++;mvuApi=findMvu()}if(mvuApi){this.mvuData=mvuApi.getMvuData({type:\"message\"});this.updateStatus(\"âœ… å¸å›½çº¿è·¯å·²è¿æ¥\",\"connected\");this.parseLevel();Shop.init();this.refreshUI()}else{this.updateStatus(\"âš ï¸ å¸å›½çº¿è·¯å·²ç¦»çº¿\",\"error\");Shop.init()}},updateStatus:function(msg,type){const el=document.getElementById(\"status\");el.className=`status-bar ${type}`;document.getElementById(\"status-text\").textContent=msg.replace(/^[âœ…âš ï¸]\\s/,\"\")},parseLevel:function(){const raw=this.mvuData?.stat_data?.è§’è‰²?.ç”Ÿå‘½å±‚çº§||\"ç¬¬ä¸€å±‚çº§\";const map={ä¸€:1,äºŒ:2,ä¸‰:3,å››:4,äº”:5,å…­:6,ä¸ƒ:7};let lv=1;for(let k in map)if(raw.includes(k)){lv=map[k];break}this.currentLevel=lv;document.getElementById(\"level-display\").textContent=raw;if(document.getElementById(\"draw-section\").innerHTML)Shop.refreshDrawPanel()},save:async function(){const mvuApi=\"undefined\"!=typeof window.Mvu?window.Mvu:window.parent.Mvu||null;if(mvuApi)await mvuApi.replaceMvuData(this.mvuData,{type:\"message\"})},setSort:function(type){this.sortType=type;document.getElementById(\"btn-sort-quality\").className=\"quality\"===type?\"sort-btn active\":\"sort-btn\";document.getElementById(\"btn-sort-type\").className=\"type\"===type?\"sort-btn active\":\"sort-btn\";this.refreshUI()},refreshUI:function(){const fp=this.mvuData?.stat_data?.å‘½å®šç³»ç»Ÿ?.å‘½è¿ç‚¹æ•°||0;document.getElementById(\"fp-display\").textContent=fp;const list=document.getElementById(\"backpack-list\");list.innerHTML=\"\";const itemsObj=this.mvuData?.stat_data?.èƒŒåŒ…||{};if(0===Object.keys(itemsObj).length){list.innerHTML='<div style=\"padding:20px; text-align:center; color:#999; font-size:0.8rem;\">ğŸ’ èƒŒåŒ…ç©ºç©ºå¦‚ä¹Ÿ</div>';return}let items=Object.entries(itemsObj).map((([k,v])=>({key:k,...v})));if(\"quality\"===this.sortType){items.sort(((a,b)=>(Config.qualityWeights[b.å“è´¨]||0)-(Config.qualityWeights[a.å“è´¨]||0)));items.forEach((item=>list.appendChild(this.createItemElement(item))))}else this.renderTypeGroups(items,list)},renderTypeGroups:function(items,container){const groups={};items.forEach((item=>{let type=item.ç±»å‹||\"æ‚ç‰©\";if(item.æ ‡ç­¾&&item.æ ‡ç­¾.includes(\"ä¿¡æ ‡\"))type=\"ğŸ’¥ æ”¯æ´ä¿¡æ ‡\";else if(item.æ ‡ç­¾&&item.æ ‡ç­¾.includes(\"é¢†åœ°\"))type=\"ğŸ—ï¸ é¢†åœ°å»ºè®¾\";else if(item.æ ‡ç­¾&&item.æ ‡ç­¾.includes(\"æˆ˜äº‰\"))type=\"âš”ï¸ æˆ˜äº‰å™¨æ¢°\";else if(item.æ ‡ç­¾&&item.æ ‡ç­¾.includes(\"ç¥ç€\"))type=\"ğŸ¤« ç¥ç€ç§è—\";if(!groups[type])groups[type]=[];groups[type].push(item)}));Object.keys(groups).sort().forEach((type=>{const groupItems=groups[type];groupItems.sort(((a,b)=>(Config.qualityWeights[b.å“è´¨]||0)-(Config.qualityWeights[a.å“è´¨]||0)));const groupDiv=document.createElement(\"div\");groupDiv.className=\"type-group\";groupDiv.innerHTML=`<div class=\"type-header\"><div><span>${type}</span></div><span class=\"type-count\">${groupItems.length}</span></div><div class=\"type-content\"></div>`;const contentDiv=groupDiv.querySelector(\".type-content\");groupItems.forEach((item=>contentDiv.appendChild(this.createItemElement(item))));container.appendChild(groupDiv)}))},createItemElement:function(data){const div=document.createElement(\"div\");div.className=\"item\";const q=data.å“è´¨||\"æ™®é€š\";div.style.setProperty(\"--c\",this.getColor(q));div.innerHTML=`<div class=\"item-header\" onclick=\"Ui.toggleItem(this)\"><div class=\"quality-indicator bg-${q}\"></div><div class=\"item-name\">${data.key}</div><div class=\"item-count\">x${data.æ•°é‡||1}</div><div class=\"item-meta\"><span class=\"tag-pill bg-${q}\">${q}</span><button class=\"btn-recycle\" onclick=\"event.stopPropagation(); App.recycleItem('${data.key}')\">â™»ï¸</button></div></div><div class=\"item-details\"><div class=\"detail-row\"><span class=\"detail-label\">ç±»å‹:</span> ${data.ç±»å‹||\"æœªçŸ¥\"}</div><div class=\"detail-row\"><span class=\"detail-label\">æ ‡ç­¾:</span> ${data.æ ‡ç­¾||\"æ— \"}</div><div class=\"detail-row\"><span class=\"detail-label\">æ•ˆæœ:</span> ${data.æ•ˆæœ||\"æ— \"}</div><div class=\"detail-row\"><span class=\"detail-label\">æè¿°:</span> ${data.æè¿°||\"æš‚æ— æè¿°\"}</div></div>`;return div},getColor:function(q){const map={æ™®é€š:\"#6c757d\",ä¼˜è‰¯:\"#28a745\",ç¨€æœ‰:\"#007bff\",å²è¯—:\"#6f42c1\",ä¼ è¯´:\"#fd7e14\",ç¥è¯:\"#dc3545\",å”¯ä¸€:\"#212529\"};return map[q]||\"#333\"},recycleItem:async function(key){if(!this.mvuData)return;const bag=this.mvuData.stat_data.èƒŒåŒ…;const item=bag[key];if(!item)return;let count=1;if(item.æ•°é‡>1){const inputVal=await Ui.showInput(\"ç‰©èµ„å›æ”¶\",`è¯·è¾“å…¥è¦å›æ”¶ <b style=\"color:#007bff\">${key}</b> çš„æ•°é‡ï¼š<br>å•ä»·: 10 FP`,item.æ•°é‡);if(null===inputVal)return;count=parseInt(inputVal);if(isNaN(count)||count<1)count=1;if(count>item.æ•°é‡)count=item.æ•°é‡}else{const sure=await Ui.showConfirm(\"ç‰©èµ„å›æ”¶\",`ç¡®å®šè¦å›æ”¶ <b style=\"color:#007bff\">${key}</b> å—ï¼Ÿ\\næ— è®ºå“è´¨ï¼Œå›æ”¶ä»·æ ¼ç»Ÿä¸€ä¸º 10 FPã€‚`);if(!sure)return}const totalFP=10*count;if(item.æ•°é‡>count)item.æ•°é‡-=count;else{delete bag[key];const resultItem=document.querySelector(`#result-item-list .item[data-key=\"${key}\"]`);if(resultItem)resultItem.remove()}this.mvuData.stat_data.å‘½å®šç³»ç»Ÿ.å‘½è¿ç‚¹æ•°=(this.mvuData.stat_data.å‘½å®šç³»ç»Ÿ.å‘½è¿ç‚¹æ•°||0)+totalFP;await this.save();this.refreshUI()},callApi:async function(endpoint,method=\"GET\",body=null){const config=ConfigManager.load();const url=config.url.replace(/\\/$/,\"\")+endpoint;const headers={\"Content-Type\":\"application/json\"};if(config.key)headers.Authorization=`Bearer ${config.key}`;try{const res=await fetch(url,{method:method,headers:headers,body:body?JSON.stringify(body):null});if(!res.ok)throw new Error(\"APIè¯·æ±‚å¤±è´¥: \"+res.status);return await res.json()}catch(e){throw e}},fetchModels:async function(){const btn=event.target;const txt=btn.innerText;btn.innerText=\"â³\";try{const data=await this.callApi(\"/models\");const sel=document.getElementById(\"api-model-select\");sel.innerHTML='<option value=\"\">-- è¯·é€‰æ‹© --</option>';data.data.forEach((m=>{const opt=document.createElement(\"option\");opt.value=m.id;opt.text=m.id;sel.add(opt)}));alert(\"åˆ—è¡¨å·²æ›´æ–°\")}catch(e){alert(\"è·å–å¤±è´¥: \"+e.message)}finally{btn.innerText=txt}},testConnection:async function(){const btn=event.target;btn.innerText=\"âš¡ æµ‹è¯•ä¸­...\";try{await this.callApi(\"/models\");alert(\"âœ… è¿æ¥æˆåŠŸ\")}catch(e){alert(\"âŒ å¤±è´¥: \"+e.message)}finally{btn.innerText=\"âš¡ æµ‹è¯•è¿æ¥\"}}};const Shop={currentType:\"æ”¯æ´ä¿¡æ ‡\",init:function(){this.selectType(\"æ”¯æ´ä¿¡æ ‡\")},selectType:function(type){this.currentType=type;document.querySelectorAll(\"#type-group .btn-select\").forEach((b=>{b.classList.toggle(\"active\",b.dataset.type===type)}));this.refreshDrawPanel()},refreshDrawPanel:function(){const container=document.getElementById(\"draw-section\");container.innerHTML=\"\";const type=this.currentType;const level=App.currentLevel||1;const setting=Config.typeSettings[type]||{};const pool=Config.getPool(type,level);let title,desc,tagsHtml,btnClass,btnText,btnAction,isLocked=!1,lockMsg=\"\";if(setting.minLevel>level){isLocked=!0;lockMsg=`ğŸ”’ æƒé™ä¸è¶³<br>éœ€è¾¾åˆ° <b>ç¬¬${setting.minLevel}å±‚çº§</b> è§£é”`}if(\"ç¥ç€ç§è—\"===type){title='<span style=\"color:#d63384\">ç¥ç€çš„ç¥ç§˜ç›²ç›’</span>';desc=\"ç¥ç€ä»å¸å›½ç§åº“â€œå€Ÿâ€æ¥çš„ï¼Œæ¦‚ä¸é€€æ¢ | <b>å…¨å“è´¨éšæœº</b>\";btnClass=\"btn-amber-draw\";btnText=\"ğŸ–ï¸ æ‘¸ç´¢ä¸€ç•ª\";btnAction=\"Shop.drawItem()\";tagsHtml='<span class=\"pool-tag\" style=\"background:linear-gradient(90deg, #6c757d, #fd7e14); font-style:italic\">? ? ?</span>'}else if(\"æˆ˜äº‰å™¨æ¢°\"===type){title='<span style=\"color:#6f42c1\">å¸å›½æˆ˜ç•¥éƒ¨ - é‡å‹æˆ˜äº‰åè®®</span>';desc=`å½“å‰å±‚çº§: <b style=\"color:#333\">${level}</b> | æˆ˜ç•¥çº§æ”¯æ´`;btnClass=\"btn-war-draw\";btnText=\"ğŸš€ ç”³è¯·ç©ºæŠ• (x1)\";btnAction=\"Shop.drawItem()\";tagsHtml=pool.length>0?pool.map((q=>{const color=App.getColor(q);return`<span class=\"pool-tag\" style=\"background:${color}\">${q}</span>`})).join(\"\"):'<span class=\"pool-tag\">--</span>'}else{const color=\"æ”¯æ´ä¿¡æ ‡\"===type?\"#dc3545\":\"#28a745\";title=`<span style=\"color:${color}\">${type}è°ƒæ‹¨ç”³è¯·</span>`;desc=`å½“å‰å±‚çº§: <b style=\"color:#333\">${level}</b> | å“è´¨æ± åŠ¨æ€è°ƒæ•´ä¸­`;btnClass=\"btn-strategy\";btnText=\"ğŸš€ ç”³è¯·è°ƒæ‹¨ (x1)\";btnAction=\"Shop.drawItem()\";tagsHtml=pool.length>0?pool.map((q=>{const color=App.getColor(q);return`<span class=\"pool-tag\" style=\"background:${color}\">${q}</span>`})).join(\"\"):'<span class=\"pool-tag\">--</span>'}container.innerHTML=`\\n            <div class=\"draw-panel\">\\n                ${isLocked?`<div class=\"lock-overlay\"><div class=\"lock-icon\">ğŸ”’</div><div class=\"lock-text\">${lockMsg}</div></div>`:\"\"}\\n                <div style=\"font-size:1.1rem;font-weight:bold\">${title}</div>\\n                <div class=\"draw-info\">${desc}</div>\\n                <div class=\"pool-tags\">${tagsHtml}</div>\\n                <button class=\"btn-draw-large ${btnClass}\" onclick=\"${btnAction}\" ${isLocked?\"disabled\":\"\"}>\\n                    ${btnText} <span class=\"price-badge\">${setting.cost} FP</span>\\n                </button>\\n            </div>`},drawItem:async function(){if(!App.mvuData)return alert(\"ç»ˆç«¯æœªè¿æ¥\");const type=this.currentType;const setting=Config.typeSettings[type];if(setting){const cost=setting.cost;const count=setting.count;const currentFP=App.mvuData.stat_data.å‘½å®šç³»ç»Ÿ.å‘½è¿ç‚¹æ•°||0;if(currentFP<cost)return Ui.showConfirm(\"FPä¸è¶³\",`éœ€è¦ ${cost} FPï¼Œå½“å‰ä»…æœ‰ ${currentFP}ã€‚`);const pool=Config.getPool(type,App.currentLevel);const sure=await Ui.showConfirm(\"ç‰©èµ„ç”³è¯·\",`ç¡®å®šç”³è¯· 1 ä¸ª [${type}] å—ï¼Ÿ\\nå½“å‰å±‚çº§å“è´¨æ± : ${\"ç¥ç€ç§è—\"===type?\"å…¨éšæœº\":pool.join(\"/\")}\\næ¶ˆè€—: <b style=\"color:#d63384\">${cost} FP</b>`);if(sure){const rolls=Array.from({length:8},(()=>Math.floor(20*Math.random())+1));const d_quality=rolls[0];const d_type=rolls[1];const finalQuality=Config.determineQuality(d_quality,pool);const finalTypeStr=Config.determineType(d_type,type);await this.processTransaction(cost,count,type,finalQuality,finalTypeStr)}}},processTransaction:async function(cost,count,type,fixedQuality,fixedTypeStr){const loader=document.getElementById(\"shop-loader\");loader.style.display=\"flex\";try{const prompt=this.buildBatchPrompt(type,count,fixedQuality,fixedTypeStr);const config=ConfigManager.load();const data=await App.callApi(\"/chat/completions\",\"POST\",{model:config.model,messages:[{role:\"system\",content:\"ä½ æ˜¯ä¸€ä¸ªä¸¥æ ¼éµå¾ªæ¸¸æˆè§„åˆ™çš„JSONç”Ÿæˆå™¨ã€‚\"},{role:\"user\",content:prompt}]});const content=data.choices[0].message.content.replace(/```json\\n?|\\n?```/g,\"\").trim();let jsonStr=content;-1!==content.indexOf(\"[\")&&-1!==content.lastIndexOf(\"]\")&&(jsonStr=content.substring(content.indexOf(\"[\"),content.lastIndexOf(\"]\")+1));let items=JSON.parse(jsonStr);Array.isArray(items)||(items=[items]);App.mvuData.stat_data.å‘½å®šç³»ç»Ÿ.å‘½è¿ç‚¹æ•°=(App.mvuData.stat_data.å‘½å®šç³»ç»Ÿ.å‘½è¿ç‚¹æ•°||0)-cost;const bag=App.mvuData.stat_data.èƒŒåŒ…;items.forEach((itemData=>{itemData.å“è´¨=fixedQuality;const cleanTag=(itemData.æ ‡ç­¾||\"\").replace(/\\[æ”¯æ´ä¿¡æ ‡\\]|\\[é¢†åœ°å»ºè®¾\\]|\\[æˆ˜äº‰å™¨æ¢°\\]|\\[ç¥ç€ç§è—\\]/g,\"\").trim();if(\"æ”¯æ´ä¿¡æ ‡\"===type){itemData.ç±»å‹=\"æ¶ˆè€—å“\";itemData.æ ‡ç­¾=`[æ”¯æ´ä¿¡æ ‡]${cleanTag}`}else if(\"é¢†åœ°å»ºè®¾\"===type){itemData.ç±»å‹=\"å…¶å®ƒç‰©å“\";itemData.æ ‡ç­¾=`[é¢†åœ°å»ºè®¾]${cleanTag}`}else if(\"æˆ˜äº‰å™¨æ¢°\"===type){itemData.ç±»å‹=\"å…¶å®ƒç‰©å“\";itemData.æ ‡ç­¾=`[æˆ˜äº‰å™¨æ¢°]${cleanTag}`}else{itemData.ç±»å‹=\"æ¶ˆè€—å“\";itemData.æ ‡ç­¾=`[ç¥ç€ç§è—]${cleanTag}`}const key=itemData.åç§°;if(bag[key])bag[key].æ•°é‡=(bag[key].æ•°é‡||1)+1;else bag[key]={å“è´¨:itemData.å“è´¨,æ•°é‡:1,ç±»å‹:itemData.ç±»å‹,æ ‡ç­¾:itemData.æ ‡ç­¾,æ•ˆæœ:itemData.æ•ˆæœ,æè¿°:itemData.æè¿°}}));await App.save();App.refreshUI();Ui.showResultsModal(\"è°ƒæ‹¨æˆåŠŸ\",items)}catch(e){console.error(e);await Ui.showConfirm(\"é”™è¯¯\",\"ç”Ÿæˆå¤±è´¥: \"+e.message+\"\\n(å¯èƒ½æ˜¯æ ¼å¼é”™è¯¯ï¼Œè¯·é‡è¯•)\")}finally{loader.style.display=\"none\"}},buildBatchPrompt:function(type,count,fixedQuality,fixedTypeStr){const rules=SystemRules;return`You are a strict Game System Generator for the world of \"Astalya\".\\nGenerate ${count} item based on the following DETERMINED result.\\n\\n# PRE-GENERATED FATE RESULT (MUST FOLLOW)\\n- Type Category: ${type}\\n- Item Category Description: **${fixedTypeStr}**\\n- Quality Level: **${fixedQuality}**\\n\\n# CRITICAL RULES (MUST FOLLOW)\\n1. **CREATE A SPECIFIC ITEM**: The \"Item Category\" above is a BROAD CATEGORY (e.g. \"Survival Food\"). You MUST generate a SPECIFIC item name and description (e.g. \"High-Calorie Nutrient Bar\" or \"Vacuum-Sealed Steak\"). DO NOT just copy the category name.\\n2. **NO ATTRIBUTE BUFFS**: You are STRICTLY FORBIDDEN from generating items that directly increase base attributes (STR/DEX/CON/INT/SPI).\\n3. **STRICT NUMERICAL VALUES**: The \"æ•ˆæœ\" field MUST contain concrete numbers based on the <Quality Rules> below.\\n4. **DO NOT RANDOMIZE AGAIN**: Use the Quality and Item Category provided above.\\n\\n# REFERENCE DATA (INJECTED CONSTANTS)\\n${rules.coreValues}\\n${rules.itemRules}\\n${rules.skillRules}\\n${rules.qualityRules}\\n\\n# GENERATION TASK\\nTarget: 1 item.\\nCategory: ${fixedTypeStr}\\nQuality: ${fixedQuality}\\n\\n# CHAIN OF THOUGHT\\nStep 1: Receive fixed Quality (${fixedQuality}) and Category (${fixedTypeStr}).\\nStep 2: BRAINSTORM a specific, flavorful item name that fits this category.\\nStep 3: Write a description for this specific item.\\nStep 4: Assign numerical stats based on Quality Rules.\\nStep 5: Format JSON.\\n\\n# OUTPUT FORMAT (JSON Array)\\n[{\"åç§°\":\"Specific Item Name\",\"å“è´¨\":\"${fixedQuality}\",\"ç±»å‹\":\"æ¶ˆè€—å“/å…¶å®ƒç‰©å“\",\"æ ‡ç­¾\":\"[Subtype]\",\"æ•ˆæœ\":\"Effect String\",\"æè¿°\":\"Flavor Text\"}]`}};setTimeout((()=>App.init()),500);</script></body></html>\n```",
    "trimStrings": [],
    "placement": [
        2
    ],
    "disabled": false,
    "markdownOnly": true,
    "promptOnly": false,
    "runOnEdit": true,
    "substituteRegex": 0,
    "minDepth": null,
    "maxDepth": null
}