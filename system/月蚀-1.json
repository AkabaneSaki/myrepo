{
    "id": "d059f1ae-4ee9-4e45-a290-7d74d73603d6",
    "scriptName": "月虫说话！",
    "findRegex": "/<moonspeak>\\s*.*?[:：]\\s*[「](.*?)[」]\\s*<\\/moonspeak>/g",
    "replaceString": "<!-- 月蚀·虚空形态对话框 (紧凑版 - 破框完整显示) -->\n<div class=\"void-mage-border\">\n    <!-- 视觉层：背景特效 -->\n    <div class=\"visual-bg\">\n        <!-- 华丽版黑魔纹 (SVG绘制) -->\n        <svg class=\"magic-circle-svg\" viewBox=\"0 0 200 200\">\n            <defs>\n                <filter id=\"void-glow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\n                    <feGaussianBlur stdDeviation=\"2\" result=\"coloredBlur\"/>\n                    <feMerge>\n                        <feMergeNode in=\"coloredBlur\"/>\n                        <feMergeNode in=\"SourceGraphic\"/>\n                    </feMerge>\n                </filter>\n                <!-- 文字路径定义 -->\n                <path id=\"text-circle-path\" d=\"M 100, 100 m -48, 0 a 48,48 0 1,1 96,0 a 48,48 0 1,1 -96,0\" />\n            </defs>\n            \n            <!-- 组1：原本的外圈 (初始大，Hover变小) -->\n            <g class=\"orbit-layer layer-outer\">\n                <g class=\"ring-outer\">\n                    <circle cx=\"100\" cy=\"100\" r=\"95\" fill=\"none\" stroke=\"var(--mana-cyan)\" stroke-width=\"1\" stroke-opacity=\"0.8\" />\n                    <circle cx=\"100\" cy=\"100\" r=\"88\" fill=\"none\" stroke=\"var(--void-blue)\" stroke-width=\"3\" stroke-dasharray=\"10, 5, 2, 5\" />\n                    <!-- 装饰符文点 -->\n                    <path d=\"M100,5 L100,15 M100,185 L100,195 M5,100 L15,100 M185,100 L195,100\" stroke=\"var(--mana-cyan)\" stroke-width=\"2\" />\n                </g>\n            </g>\n\n            <!-- 组2：原本的中层 (初始中，Hover变小) -->\n            <g class=\"orbit-layer layer-mid\">\n                <g class=\"geom-mid\">\n                    <!-- 八角星构成 -->\n                    <rect x=\"50\" y=\"50\" width=\"100\" height=\"100\" fill=\"none\" stroke=\"var(--void-blue)\" stroke-width=\"1.5\" />\n                    <rect x=\"50\" y=\"50\" width=\"100\" height=\"100\" fill=\"none\" stroke=\"var(--void-blue)\" stroke-width=\"1.5\" transform=\"rotate(45, 100, 100)\" />\n                    <!-- 内部圆环 -->\n                    <circle cx=\"100\" cy=\"100\" r=\"60\" fill=\"none\" stroke=\"var(--mana-cyan)\" stroke-width=\"0.8\" />\n                </g>\n            </g>\n\n            <!-- 组3：原本的内层六芒星 (初始小，Hover变大成最外层) -->\n            <g class=\"orbit-layer layer-inner\">\n                <g class=\"ring-inner\">\n                    <!-- 替换原有虚线圆为文字环绕 -->\n                    <!-- 修改：全大写，调整字体为衬线体以适配大写风格，使用 textLength 强制撑满圆周消除缺口 -->\n                    <text fill=\"var(--mana-cyan)\" font-size=\"9.5\" font-family=\"'Cinzel', 'Trajan Pro', 'Georgia', serif\" font-weight=\"bold\" letter-spacing=\"2\" opacity=\"1\" style=\"text-shadow: 0 0 2px var(--void-blue);\">\n                        <!-- 半径48的圆周长约为301.5，设置textLength使其首尾相接 -->\n                        <textPath href=\"#text-circle-path\" startOffset=\"0%\" textLength=\"301\" lengthAdjust=\"spacing\">\n                            MOON ✦ DESTINY ✦ CORROSION ✦\n                        </textPath>\n                    </text>\n                    \n                    <!-- 正三角形 -->\n                    <polygon points=\"100,55 139,122.5 61,122.5\" fill=\"none\" stroke=\"var(--mana-cyan)\" stroke-width=\"1.5\" opacity=\"1\" />\n                    <!-- 倒三角形 -->\n                    <polygon points=\"100,145 139,77.5 61,77.5\" fill=\"none\" stroke=\"var(--mana-cyan)\" stroke-width=\"1.5\" opacity=\"1\" />\n                </g>\n            </g>\n        </svg>\n        \n        <!-- 漂浮魔力粒子 -->\n        <div class=\"mana-dust m1\"></div>\n        <div class=\"mana-dust m2\"></div>\n        <div class=\"mana-dust m3\"></div>\n        <div class=\"mana-dust m4\"></div>\n        <div class=\"mana-dust m5\"></div>\n    </div>\n\n    <!-- 标题区域 -->\n    <div class=\"header-bar\">\n        <span class=\"title-text\">【 月蚀 】</span>\n        <div class=\"void-line\"></div>\n    </div>\n\n    <!-- 内容区域 -->\n    <div class=\"content-body\">$1</div>\n</div>\n\n<style>\n.void-mage-border {\n    /* --- 核心变量 (色调已调亮) --- */\n    --void-dark: #050508;\n    --void-blue: #5c6bc0; /* 原 #1a237e -> 提亮为靛蓝 */\n    --mana-cyan: #81d4fa; /* 原 #4fc3f7 -> 提亮为浅青 */\n\n    position: relative;\n    margin: 20px auto;\n    padding: 25px;\n\n    /* 尺寸调整 */\n    width: 95%;\n    max-width: 900px;\n    min-height: 180px;\n\n    /* 边框设置 */\n    border: 1px solid var(--void-blue);\n    border-radius: 8px;\n\n    box-shadow: 0 0 20px rgba(92, 107, 192, 0.4),\n                inset 0 0 80px rgba(0, 0, 0, 1);\n    background: linear-gradient(180deg, #0f0f1a 0%, #000000 100%);\n    color: #e3f2fd;\n    font-family: 'Cinzel', 'Noto Serif SC', serif;\n    transition: all 0.5s;\n    /* 已移除 overflow: hidden 以允许魔法阵破框显示 */\n}\n\n.void-mage-border:hover {\n    box-shadow: 0 0 30px rgba(129, 212, 250, 0.4),\n                inset 0 0 40px rgba(57, 73, 171, 0.6);\n    border-color: var(--mana-cyan);\n}\n\n/* --- 视觉层 --- */\n.void-mage-border .visual-bg {\n    position: absolute; top: 0; left: 0; width: 100%; height: 100%;\n    pointer-events: none; z-index: 0; \n    /* 已移除 overflow: hidden 以允许魔法阵破框显示 */\n}\n\n/* --- SVG 黑魔纹 (动态版) --- */\n.magic-circle-svg {\n    position: absolute;\n    right: -40px; \n    bottom: -40px;\n    width: 250px;\n    height: 250px;\n    opacity: 0.6; /* 基础亮度提升 0.4 -> 0.6 */\n    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n    overflow: visible; /* 关键修改：允许SVG内容超出视口显示 */\n}\n\n.void-mage-border:hover .magic-circle-svg {\n    opacity: 0.9; /* hover亮度提升 */\n    transform: scale(1.05); \n}\n\n/* --- 核心动画逻辑：缩放层 --- */\n.orbit-layer {\n    transform-origin: 100px 100px;\n    transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.8s;\n}\n\n/* 初始状态 */\n.layer-outer {\n    transform: scale(1);\n    opacity: 0.8; /* 提亮 */\n}\n.layer-mid {\n    transform: scale(0.65);\n    opacity: 0.8; /* 提亮 */\n}\n.layer-inner {\n    transform: scale(0.4);\n    opacity: 0.7; /* 提亮 */\n}\n\n/* Hover 状态 */\n.void-mage-border:hover .layer-outer {\n    transform: scale(0.35);\n    opacity: 0.5;\n}\n.void-mage-border:hover .layer-mid {\n    transform: scale(0.6);\n    opacity: 0.6;\n}\n.void-mage-border:hover .layer-inner {\n    /* 关键修改：从 2.1 调整为 1.8，防止放大过大导致被切 */\n    transform: scale(1.8);\n    opacity: 1;\n    filter: drop-shadow(0 0 2px var(--mana-cyan));\n}\n\n/* --- 旋转动画定义 --- */\n.ring-outer {\n    transform-origin: 100px 100px;\n    animation: spin-cw 60s linear infinite;\n}\n\n.geom-mid {\n    transform-origin: 100px 100px;\n    animation: spin-ccw 40s linear infinite;\n}\n\n.ring-inner {\n    transform-origin: 100px 100px;\n    animation: spin-cw 25s linear infinite; /* 稍微调慢文字旋转速度以便阅读 */\n}\n\n/* --- 漂浮粒子 --- */\n.mana-dust {\n    position: absolute; width: 2px; height: 2px; border-radius: 50%;\n    background: var(--mana-cyan);\n    box-shadow: 0 0 5px var(--mana-cyan);\n    opacity: 0;\n}\n.m1 { bottom: 10%; left: 15%; animation: mana-float 5s linear infinite; }\n.m2 { bottom: 30%; left: 50%; animation: mana-float 7s linear infinite 1s; }\n.m3 { bottom: 5%; left: 80%; animation: mana-float 6s linear infinite 2.5s; }\n.m4 { bottom: 20%; left: 30%; animation: mana-float 8s linear infinite 0.5s; }\n.m5 { bottom: 15%; left: 70%; animation: mana-float 5.5s linear infinite 3s; }\n\n/* --- 标题栏 --- */\n.void-mage-border .header-bar {\n    position: relative; z-index: 3;\n    display: flex; align-items: center;\n    margin-bottom: 15px;\n    padding-bottom: 10px;\n    border-bottom: 1px solid rgba(129, 212, 250, 0.3);\n}\n\n.void-mage-border .title-text {\n    font-size: 1.4em; font-weight: bold;\n    color: var(--mana-cyan);\n    text-shadow: 0 0 10px var(--void-blue);\n    letter-spacing: 3px;\n}\n\n.void-mage-border .void-line {\n    flex-grow: 1; height: 1px;\n    background: linear-gradient(90deg, var(--void-blue), transparent);\n    margin-left: 15px; opacity: 0.8;\n}\n\n/* --- 内容 --- */\n.void-mage-border .content-body {\n    position: relative; z-index: 3;\n    line-height: 1.8;\n    font-size: 1.05em;\n    text-shadow: 0 2px 4px #000;\n}\n\n/* --- 动画关键帧 --- */\n@keyframes spin-cw {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n}\n\n@keyframes spin-ccw {\n    from { transform: rotate(360deg); }\n    to { transform: rotate(0deg); }\n}\n\n@keyframes mana-float {\n    0% { opacity: 0; transform: translateY(0); }\n    50% { opacity: 0.8; }\n    100% { opacity: 0; transform: translateY(-40px); }\n}\n</style>",
    "trimStrings": [],
    "placement": [
        2
    ],
    "disabled": false,
    "markdownOnly": false,
    "promptOnly": false,
    "runOnEdit": true,
    "substituteRegex": 0,
    "minDepth": null,
    "maxDepth": null
}